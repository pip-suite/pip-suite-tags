{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/data/TagDataService.ts","src/data/index.ts","src/index.ts","src/rest/TagResources.ts","src/tag_list/TagList.ts","temp/pip-suite-tags-html.min.js"],"names":[],"mappings":"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","file":"pip-suite-tags.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { ITagDataService, ITagDataProvider } from './ITagDataService';\nimport { PartyTags } from './PartyTags';\nimport { Tag } from './Tag';\n\nclass TagData implements ITagDataService {\n    private RESOURCE: string = 'tags';\n\n    constructor(\n        private pipRest: pip.rest.IRestService,\n        private pipSession: pip.services.ISessionService\n    ) {\n        \"ngInject\";\n    }\n\n    public getUserId(): string {\n        let userId: string;\n        userId = this.pipSession.session ? this.pipSession.session.userId : null;\n\n        return userId;\n    }\n\n    public readTags(params: any, successCallback?: (data: PartyTags) => void, errorCallback?: (error: any) => void): angular.IPromise<any> {\n        params = params || {};\n        params.party_id = params.party_id ? params.party_id : this.getUserId();\n        return this.pipRest.getResource(this.RESOURCE).get(params, successCallback, errorCallback);\n    }\n\n    public createTags(params: any, data: any, successCallback?: (item: any) => void, errorCallback?: (error: any) => void): void {\n        params.party_id = params.party_id ? params.party_id : this.getUserId();\n        this.pipRest.getResource(this.RESOURCE).save(params, data, successCallback, errorCallback);\n    }\n\n    public updateTags(params: any, data: any, successCallback?: (item: any) => void, errorCallback?: (error: any) => void): void {\n        params.party_id = params.party_id ? params.party_id : this.getUserId();\n        this.pipRest.getResource(this.RESOURCE).update(params, data, successCallback, errorCallback);\n    }\n\n}\n\nclass TagDataProvider implements ITagDataProvider {\n    private _service: ITagDataService;\n\n    constructor() { }\n\n    public $get(\n        pipRest: pip.rest.IRestService,\n        pipSession: pip.services.ISessionService\n    ) {\n        \"ngInject\";\n\n        if (this._service == null) {\n            this._service = new TagData(pipRest, pipSession);\n        }\n\n        return this._service;\n    }\n\n}\n\nangular\n    .module('pipTagData', ['pipCommonRest'])\n    .provider('pipTagData', TagDataProvider);\n\n","import './TagDataService';\nimport './ITagDataService';\n\n\nexport * from './ITagDataService';\n\n","import './tag_list/TagList'\nimport './rest/TagResources';\nimport './data';\n\n\nangular.module('pipTags', [\n        'pipTag.Rest',\n        'pipTagData',\n        'pipTagList'\n]);\n\n\nexport * from './data';\n\n\n","function configTagResources(pipRestProvider: pip.rest.IRestProvider) {\n    \"ngIjnect\";\n    \n    pipRestProvider.registerResource('tags', '/api/1.0/tags/:party_id',\n        { party_id: '@party_id' },\n        {\n            update: { method: 'PUT' }\n        }\n    );\n}\n\nangular\n    .module('pipTag.Rest', ['pipRest'])\n    .config(configTagResources);\n\n","{\n    interface ITagList {\n        tags: string[];\n        type: string;\n        typeLocal: string;\n    }\n\n    class TagListController implements ITagList {\n        public rebind: string;\n\n        public tags: string[];\n        public type: string;\n        public typeLocal: string;\n\n        constructor(\n            $scope: ng.IScope,\n            $element: ng.IRootElementService\n        ) {\n\n            // Set tags\n            $element.css('display', 'block');\n            $element.addClass('pip-tag-list');\n        }\n\n        private toBoolean(value: string): boolean {\n            if (_.isNull(value) || _.isUndefined(value)) return false;\n            if (!value) return false;\n            value = value.toString().toLowerCase();\n            return value == '1' || value == 'true';\n        }\n\n        public $onChanges(changes: TagListChanges) {\n            if (this.rebind && changes.tags) {\n                this.tags = changes.tags.currentValue;\n            }\n\n        }\n\n    }\n\n    interface ITagListBindings {\n        [key: string]: any;\n\n        tags: any,\n        type: any,\n        typeLocal: any,\n        rebuid: any\n    }\n\n    const TagListBindings: ITagListBindings = {\n        tags: '<pipTags',\n        type: '<pipType',\n        typeLocal: '<pipTypeLocal',\n        rebuid: '<pipRebind'\n    }\n\n    class TagListChanges implements ng.IOnChangesObject, ITagListBindings {\n        [key: string]: ng.IChangesObject<any>;\n\n        tags: ng.IChangesObject<string[]>;\n        type: ng.IChangesObject<string>;\n        typeLocal: ng.IChangesObject<string>;\n        rebuid: ng.IChangesObject<boolean>\n    }\n\n    const TagList = {\n        bindings: TagListBindings,\n        templateUrl: 'tag_list/TagList.html',\n        controller: TagListController\n    }\n\n    angular\n        .module('pipTagList', ['pipTranslate'])\n        .component('pipTagList', TagList)\n\n}","(function(module) {\ntry {\n  module = angular.module('pipTags.Templates');\n} catch (e) {\n  module = angular.module('pipTags.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('tag_list/TagList.html',\n    '<div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{\\'bg-\\' + $ctrl.type + \\'-chips\\'}}\" ng-if=\"$ctrl.type && !$ctrl.typeLocal\"><span>{{$ctrl.type.toUpperCase() | translate | uppercase}}</span></div><div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{\\'bg-\\' + $ctrl.type + \\'-chips\\'}}\" ng-if=\"$ctrl.type && $ctrl.typeLocal\"><span>{{$ctrl.typeLocal.toUpperCase() | translate | uppercase}}</span></div><div class=\"pip-chip rm4\" ng-repeat=\"tag in $ctrl.tags\"><span>{{::tag}}</span></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-suite-tags-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZGF0YS9UYWdEYXRhU2VydmljZS50cyIsInNyYy9kYXRhL2luZGV4LnRzIiwic3JjL2luZGV4LnRzIiwic3JjL3Jlc3QvVGFnUmVzb3VyY2VzLnRzIiwic3JjL3RhZ19saXN0L1RhZ0xpc3QudHMiLCJ0ZW1wL3BpcC1zdWl0ZS10YWdzLWh0bWwubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUNJQTtJQUdJLGlCQUNZLE9BQThCLEVBQzlCLFVBQXdDO1FBRWhELFVBQVUsQ0FBQztRQUhILFlBQU8sR0FBUCxPQUFPLENBQXVCO1FBQzlCLGVBQVUsR0FBVixVQUFVLENBQThCO1FBSjVDLGFBQVEsR0FBVyxNQUFNLENBQUM7SUFPbEMsQ0FBQztJQUVNLDJCQUFTLEdBQWhCO1FBQ0ksSUFBSSxNQUFjLENBQUM7UUFDbkIsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFFekUsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRU0sMEJBQVEsR0FBZixVQUFnQixNQUFXLEVBQUUsZUFBMkMsRUFBRSxhQUFvQztRQUMxRyxNQUFNLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQztRQUN0QixNQUFNLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDdkUsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLGVBQWUsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUMvRixDQUFDO0lBRU0sNEJBQVUsR0FBakIsVUFBa0IsTUFBVyxFQUFFLElBQVMsRUFBRSxlQUFxQyxFQUFFLGFBQW9DO1FBQ2pILE1BQU0sQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUN2RSxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQy9GLENBQUM7SUFFTSw0QkFBVSxHQUFqQixVQUFrQixNQUFXLEVBQUUsSUFBUyxFQUFFLGVBQXFDLEVBQUUsYUFBb0M7UUFDakgsTUFBTSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3ZFLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFDakcsQ0FBQztJQUVMLGNBQUM7QUFBRCxDQWpDQSxBQWlDQyxJQUFBO0FBRUQ7SUFHSTtJQUFnQixDQUFDO0lBRVYsOEJBQUksR0FBWCxVQUNJLE9BQThCLEVBQzlCLFVBQXdDO1FBRXhDLFVBQVUsQ0FBQztRQUVYLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN4QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksT0FBTyxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNyRCxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDekIsQ0FBQztJQUVMLHNCQUFDO0FBQUQsQ0FsQkEsQUFrQkMsSUFBQTtBQUVELE9BQU87S0FDRixNQUFNLENBQUMsWUFBWSxFQUFFLENBQUMsZUFBZSxDQUFDLENBQUM7S0FDdkMsUUFBUSxDQUFDLFlBQVksRUFBRSxlQUFlLENBQUMsQ0FBQzs7OztBQzdEN0MsNEJBQTBCO0FBQzFCLDZCQUEyQjs7OztBQ0QzQiw4QkFBMkI7QUFDM0IsK0JBQTZCO0FBQzdCLGtCQUFnQjtBQUdoQixPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRTtJQUNsQixhQUFhO0lBQ2IsWUFBWTtJQUNaLFlBQVk7Q0FDbkIsQ0FBQyxDQUFDOztBQ1RILDRCQUE0QixlQUF1QztJQUMvRCxVQUFVLENBQUM7SUFFWCxlQUFlLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLHlCQUF5QixFQUM5RCxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsRUFDekI7UUFDSSxNQUFNLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO0tBQzVCLENBQ0osQ0FBQztBQUNOLENBQUM7QUFFRCxPQUFPO0tBQ0YsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0tBQ2xDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOztBQ2JoQyxDQUFDO0lBT0c7UUFPSSwyQkFDSSxNQUFpQixFQUNqQixRQUFnQztZQUloQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUNqQyxRQUFRLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RDLENBQUM7UUFFTyxxQ0FBUyxHQUFqQixVQUFrQixLQUFhO1lBQzNCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1lBQzFELEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO2dCQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7WUFDekIsS0FBSyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN2QyxNQUFNLENBQUMsS0FBSyxJQUFJLEdBQUcsSUFBSSxLQUFLLElBQUksTUFBTSxDQUFDO1FBQzNDLENBQUM7UUFFTSxzQ0FBVSxHQUFqQixVQUFrQixPQUF1QjtZQUNyQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUM5QixJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQzFDLENBQUM7UUFFTCxDQUFDO1FBRUwsd0JBQUM7SUFBRCxDQS9CQSxBQStCQyxJQUFBO0lBV0QsSUFBTSxlQUFlLEdBQXFCO1FBQ3RDLElBQUksRUFBRSxVQUFVO1FBQ2hCLElBQUksRUFBRSxVQUFVO1FBQ2hCLFNBQVMsRUFBRSxlQUFlO1FBQzFCLE1BQU0sRUFBRSxZQUFZO0tBQ3ZCLENBQUE7SUFFRDtRQUFBO1FBT0EsQ0FBQztRQUFELHFCQUFDO0lBQUQsQ0FQQSxBQU9DLElBQUE7SUFFRCxJQUFNLE9BQU8sR0FBRztRQUNaLFFBQVEsRUFBRSxlQUFlO1FBQ3pCLFdBQVcsRUFBRSx1QkFBdUI7UUFDcEMsVUFBVSxFQUFFLGlCQUFpQjtLQUNoQyxDQUFBO0lBRUQsT0FBTztTQUNGLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQztTQUN0QyxTQUFTLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFBO0FBRXpDLENBQUM7O0FDM0VEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgeyBJVGFnRGF0YVNlcnZpY2UsIElUYWdEYXRhUHJvdmlkZXIgfSBmcm9tICcuL0lUYWdEYXRhU2VydmljZSc7XG5pbXBvcnQgeyBQYXJ0eVRhZ3MgfSBmcm9tICcuL1BhcnR5VGFncyc7XG5pbXBvcnQgeyBUYWcgfSBmcm9tICcuL1RhZyc7XG5cbmNsYXNzIFRhZ0RhdGEgaW1wbGVtZW50cyBJVGFnRGF0YVNlcnZpY2Uge1xuICAgIHByaXZhdGUgUkVTT1VSQ0U6IHN0cmluZyA9ICd0YWdzJztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBpcFJlc3Q6IHBpcC5yZXN0LklSZXN0U2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwaXBTZXNzaW9uOiBwaXAuc2VydmljZXMuSVNlc3Npb25TZXJ2aWNlXG4gICAgKSB7XG4gICAgICAgIFwibmdJbmplY3RcIjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VXNlcklkKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCB1c2VySWQ6IHN0cmluZztcbiAgICAgICAgdXNlcklkID0gdGhpcy5waXBTZXNzaW9uLnNlc3Npb24gPyB0aGlzLnBpcFNlc3Npb24uc2Vzc2lvbi51c2VySWQgOiBudWxsO1xuXG4gICAgICAgIHJldHVybiB1c2VySWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHJlYWRUYWdzKHBhcmFtczogYW55LCBzdWNjZXNzQ2FsbGJhY2s/OiAoZGF0YTogUGFydHlUYWdzKSA9PiB2b2lkLCBlcnJvckNhbGxiYWNrPzogKGVycm9yOiBhbnkpID0+IHZvaWQpOiBhbmd1bGFyLklQcm9taXNlPGFueT4ge1xuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG4gICAgICAgIHBhcmFtcy5wYXJ0eV9pZCA9IHBhcmFtcy5wYXJ0eV9pZCA/IHBhcmFtcy5wYXJ0eV9pZCA6IHRoaXMuZ2V0VXNlcklkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBpcFJlc3QuZ2V0UmVzb3VyY2UodGhpcy5SRVNPVVJDRSkuZ2V0KHBhcmFtcywgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlVGFncyhwYXJhbXM6IGFueSwgZGF0YTogYW55LCBzdWNjZXNzQ2FsbGJhY2s/OiAoaXRlbTogYW55KSA9PiB2b2lkLCBlcnJvckNhbGxiYWNrPzogKGVycm9yOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgcGFyYW1zLnBhcnR5X2lkID0gcGFyYW1zLnBhcnR5X2lkID8gcGFyYW1zLnBhcnR5X2lkIDogdGhpcy5nZXRVc2VySWQoKTtcbiAgICAgICAgdGhpcy5waXBSZXN0LmdldFJlc291cmNlKHRoaXMuUkVTT1VSQ0UpLnNhdmUocGFyYW1zLCBkYXRhLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVUYWdzKHBhcmFtczogYW55LCBkYXRhOiBhbnksIHN1Y2Nlc3NDYWxsYmFjaz86IChpdGVtOiBhbnkpID0+IHZvaWQsIGVycm9yQ2FsbGJhY2s/OiAoZXJyb3I6IGFueSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBwYXJhbXMucGFydHlfaWQgPSBwYXJhbXMucGFydHlfaWQgPyBwYXJhbXMucGFydHlfaWQgOiB0aGlzLmdldFVzZXJJZCgpO1xuICAgICAgICB0aGlzLnBpcFJlc3QuZ2V0UmVzb3VyY2UodGhpcy5SRVNPVVJDRSkudXBkYXRlKHBhcmFtcywgZGF0YSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICB9XG5cbn1cblxuY2xhc3MgVGFnRGF0YVByb3ZpZGVyIGltcGxlbWVudHMgSVRhZ0RhdGFQcm92aWRlciB7XG4gICAgcHJpdmF0ZSBfc2VydmljZTogSVRhZ0RhdGFTZXJ2aWNlO1xuXG4gICAgY29uc3RydWN0b3IoKSB7IH1cblxuICAgIHB1YmxpYyAkZ2V0KFxuICAgICAgICBwaXBSZXN0OiBwaXAucmVzdC5JUmVzdFNlcnZpY2UsXG4gICAgICAgIHBpcFNlc3Npb246IHBpcC5zZXJ2aWNlcy5JU2Vzc2lvblNlcnZpY2VcbiAgICApIHtcbiAgICAgICAgXCJuZ0luamVjdFwiO1xuXG4gICAgICAgIGlmICh0aGlzLl9zZXJ2aWNlID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlcnZpY2UgPSBuZXcgVGFnRGF0YShwaXBSZXN0LCBwaXBTZXNzaW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXJ2aWNlO1xuICAgIH1cblxufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgncGlwVGFnRGF0YScsIFsncGlwQ29tbW9uUmVzdCddKVxuICAgIC5wcm92aWRlcigncGlwVGFnRGF0YScsIFRhZ0RhdGFQcm92aWRlcik7XG5cbiIsImltcG9ydCAnLi9UYWdEYXRhU2VydmljZSc7XG5pbXBvcnQgJy4vSVRhZ0RhdGFTZXJ2aWNlJztcblxuXG5leHBvcnQgKiBmcm9tICcuL0lUYWdEYXRhU2VydmljZSc7XG5cbiIsImltcG9ydCAnLi90YWdfbGlzdC9UYWdMaXN0J1xuaW1wb3J0ICcuL3Jlc3QvVGFnUmVzb3VyY2VzJztcbmltcG9ydCAnLi9kYXRhJztcblxuXG5hbmd1bGFyLm1vZHVsZSgncGlwVGFncycsIFtcbiAgICAgICAgJ3BpcFRhZy5SZXN0JyxcbiAgICAgICAgJ3BpcFRhZ0RhdGEnLFxuICAgICAgICAncGlwVGFnTGlzdCdcbl0pO1xuXG5cbmV4cG9ydCAqIGZyb20gJy4vZGF0YSc7XG5cblxuIiwiZnVuY3Rpb24gY29uZmlnVGFnUmVzb3VyY2VzKHBpcFJlc3RQcm92aWRlcjogcGlwLnJlc3QuSVJlc3RQcm92aWRlcikge1xuICAgIFwibmdJam5lY3RcIjtcbiAgICBcbiAgICBwaXBSZXN0UHJvdmlkZXIucmVnaXN0ZXJSZXNvdXJjZSgndGFncycsICcvYXBpLzEuMC90YWdzLzpwYXJ0eV9pZCcsXG4gICAgICAgIHsgcGFydHlfaWQ6ICdAcGFydHlfaWQnIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVwZGF0ZTogeyBtZXRob2Q6ICdQVVQnIH1cbiAgICAgICAgfVxuICAgICk7XG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdwaXBUYWcuUmVzdCcsIFsncGlwUmVzdCddKVxuICAgIC5jb25maWcoY29uZmlnVGFnUmVzb3VyY2VzKTtcblxuIiwie1xuICAgIGludGVyZmFjZSBJVGFnTGlzdCB7XG4gICAgICAgIHRhZ3M6IHN0cmluZ1tdO1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHR5cGVMb2NhbDogc3RyaW5nO1xuICAgIH1cblxuICAgIGNsYXNzIFRhZ0xpc3RDb250cm9sbGVyIGltcGxlbWVudHMgSVRhZ0xpc3Qge1xuICAgICAgICBwdWJsaWMgcmViaW5kOiBzdHJpbmc7XG5cbiAgICAgICAgcHVibGljIHRhZ3M6IHN0cmluZ1tdO1xuICAgICAgICBwdWJsaWMgdHlwZTogc3RyaW5nO1xuICAgICAgICBwdWJsaWMgdHlwZUxvY2FsOiBzdHJpbmc7XG5cbiAgICAgICAgY29uc3RydWN0b3IoXG4gICAgICAgICAgICAkc2NvcGU6IG5nLklTY29wZSxcbiAgICAgICAgICAgICRlbGVtZW50OiBuZy5JUm9vdEVsZW1lbnRTZXJ2aWNlXG4gICAgICAgICkge1xuXG4gICAgICAgICAgICAvLyBTZXQgdGFnc1xuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygncGlwLXRhZy1saXN0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHRvQm9vbGVhbih2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgICAgICBpZiAoXy5pc051bGwodmFsdWUpIHx8IF8uaXNVbmRlZmluZWQodmFsdWUpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PSAnMScgfHwgdmFsdWUgPT0gJ3RydWUnO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljICRvbkNoYW5nZXMoY2hhbmdlczogVGFnTGlzdENoYW5nZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYmluZCAmJiBjaGFuZ2VzLnRhZ3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ3MgPSBjaGFuZ2VzLnRhZ3MuY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGludGVyZmFjZSBJVGFnTGlzdEJpbmRpbmdzIHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xuXG4gICAgICAgIHRhZ3M6IGFueSxcbiAgICAgICAgdHlwZTogYW55LFxuICAgICAgICB0eXBlTG9jYWw6IGFueSxcbiAgICAgICAgcmVidWlkOiBhbnlcbiAgICB9XG5cbiAgICBjb25zdCBUYWdMaXN0QmluZGluZ3M6IElUYWdMaXN0QmluZGluZ3MgPSB7XG4gICAgICAgIHRhZ3M6ICc8cGlwVGFncycsXG4gICAgICAgIHR5cGU6ICc8cGlwVHlwZScsXG4gICAgICAgIHR5cGVMb2NhbDogJzxwaXBUeXBlTG9jYWwnLFxuICAgICAgICByZWJ1aWQ6ICc8cGlwUmViaW5kJ1xuICAgIH1cblxuICAgIGNsYXNzIFRhZ0xpc3RDaGFuZ2VzIGltcGxlbWVudHMgbmcuSU9uQ2hhbmdlc09iamVjdCwgSVRhZ0xpc3RCaW5kaW5ncyB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IG5nLklDaGFuZ2VzT2JqZWN0PGFueT47XG5cbiAgICAgICAgdGFnczogbmcuSUNoYW5nZXNPYmplY3Q8c3RyaW5nW10+O1xuICAgICAgICB0eXBlOiBuZy5JQ2hhbmdlc09iamVjdDxzdHJpbmc+O1xuICAgICAgICB0eXBlTG9jYWw6IG5nLklDaGFuZ2VzT2JqZWN0PHN0cmluZz47XG4gICAgICAgIHJlYnVpZDogbmcuSUNoYW5nZXNPYmplY3Q8Ym9vbGVhbj5cbiAgICB9XG5cbiAgICBjb25zdCBUYWdMaXN0ID0ge1xuICAgICAgICBiaW5kaW5nczogVGFnTGlzdEJpbmRpbmdzLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RhZ19saXN0L1RhZ0xpc3QuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6IFRhZ0xpc3RDb250cm9sbGVyXG4gICAgfVxuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwaXBUYWdMaXN0JywgWydwaXBUcmFuc2xhdGUnXSlcbiAgICAgICAgLmNvbXBvbmVudCgncGlwVGFnTGlzdCcsIFRhZ0xpc3QpXG5cbn0iLCIoZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwVGFncy5UZW1wbGF0ZXMnKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcFRhZ3MuVGVtcGxhdGVzJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCd0YWdfbGlzdC9UYWdMaXN0Lmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwicGlwLWNoaXAgcm00IHBpcC10eXBlLWNoaXAgcGlwLXR5cGUtY2hpcC1sZWZ0IHt7XFwnYmctXFwnICsgJGN0cmwudHlwZSArIFxcJy1jaGlwc1xcJ319XCIgbmctaWY9XCIkY3RybC50eXBlICYmICEkY3RybC50eXBlTG9jYWxcIj48c3Bhbj57eyRjdHJsLnR5cGUudG9VcHBlckNhc2UoKSB8IHRyYW5zbGF0ZSB8IHVwcGVyY2FzZX19PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJwaXAtY2hpcCBybTQgcGlwLXR5cGUtY2hpcCBwaXAtdHlwZS1jaGlwLWxlZnQge3tcXCdiZy1cXCcgKyAkY3RybC50eXBlICsgXFwnLWNoaXBzXFwnfX1cIiBuZy1pZj1cIiRjdHJsLnR5cGUgJiYgJGN0cmwudHlwZUxvY2FsXCI+PHNwYW4+e3skY3RybC50eXBlTG9jYWwudG9VcHBlckNhc2UoKSB8IHRyYW5zbGF0ZSB8IHVwcGVyY2FzZX19PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJwaXAtY2hpcCBybTRcIiBuZy1yZXBlYXQ9XCJ0YWcgaW4gJGN0cmwudGFnc1wiPjxzcGFuPnt7Ojp0YWd9fTwvc3Bhbj48L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcC1zdWl0ZS10YWdzLWh0bWwubWluLmpzLm1hcFxuIl19"}