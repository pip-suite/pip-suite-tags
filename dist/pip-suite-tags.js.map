{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/data/TagDataService.ts","src/data/index.ts","src/index.ts","src/rest/TagResources.ts","src/tag_list/TagList.ts","temp/pip-suite-tags-html.min.js"],"names":[],"mappings":"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","file":"pip-suite-tags.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { ITagDataService, ITagDataProvider } from './ITagDataService';\nimport { PartyTags } from './PartyTags';\nimport { Tag } from './Tag';\n\nclass TagData implements ITagDataService {\n    private RESOURCE: string = 'tags';\n\n    constructor(\n        private pipRest: pip.rest.IRestService,\n        private pipSession: pip.services.ISessionService\n    ) {\n        \"ngInject\";\n    }\n\n    public getUserId(): string {\n        let userId: string;\n        userId = this.pipSession.session ? this.pipSession.session.userId : null;\n\n        return userId;\n    }\n\n    public readTags(params: any, successCallback?: (data: PartyTags) => void, errorCallback?: (error: any) => void): angular.IPromise<any> {\n        params = params || {};\n        params.party_id = params.party_id ? params.party_id : this.getUserId();\n        return this.pipRest.getResource(this.RESOURCE).get(params, successCallback, errorCallback);\n    }\n\n    public createTags(params: any, data: any, successCallback?: (item: any) => void, errorCallback?: (error: any) => void): void {\n        params.party_id = params.party_id ? params.party_id : this.getUserId();\n        this.pipRest.getResource(this.RESOURCE).save(params, data, successCallback, errorCallback);\n    }\n\n    public updateTags(params: any, data: any, successCallback?: (item: any) => void, errorCallback?: (error: any) => void): void {\n        params.party_id = params.party_id ? params.party_id : this.getUserId();\n        this.pipRest.getResource(this.RESOURCE).update(params, data, successCallback, errorCallback);\n    }\n\n}\n\nclass TagDataProvider implements ITagDataProvider {\n    private _service: ITagDataService;\n\n    constructor() { }\n\n    public $get(\n        pipRest: pip.rest.IRestService,\n        pipSession: pip.services.ISessionService\n    ) {\n        \"ngInject\";\n\n        if (this._service == null) {\n            this._service = new TagData(pipRest, pipSession);\n        }\n\n        return this._service;\n    }\n\n}\n\nangular\n    .module('pipTagData', ['pipCommonRest'])\n    .provider('pipTagData', TagDataProvider);\n\n","import './TagDataService';\nimport './ITagDataService';\n\n\nexport * from './ITagDataService';\n\n","import './tag_list/TagList'\nimport './rest/TagResources';\nimport './data';\n\n\nangular.module('pipTags', [\n        'pipTag.Rest',\n        'pipTagData',\n        'pipTagList'\n]);\n\n\nexport * from './data';\n\n\n","function configTagResources(pipRestProvider: pip.rest.IRestProvider) {\n    pipRestProvider.registerResource('tags', '/api/1.0/tags/:party_id',\n        { party_id: '@party_id' },\n        {\n            update: { method: 'PUT' }\n        }\n    );\n}\n\nangular\n    .module('pipTag.Rest', [])\n    .config(configTagResources);\n\n","{\n    interface ITagList {\n        tags: string[];\n        type: string;\n        typeLocal: string;\n    }\n\n    class TagListController implements ITagList {\n        public rebind: string;\n\n        public tags: string[];\n        public type: string;\n        public typeLocal: string;\n\n        constructor(\n            $scope: ng.IScope,\n            $element: ng.IRootElementService\n        ) {\n\n            // Set tags\n            $element.css('display', 'block');\n            $element.addClass('pip-tag-list');\n        }\n\n        private toBoolean(value: string): boolean {\n            if (_.isNull(value) || _.isUndefined(value)) return false;\n            if (!value) return false;\n            value = value.toString().toLowerCase();\n            return value == '1' || value == 'true';\n        }\n\n        public $onChanges(changes: TagListChanges) {\n            if (this.rebind && changes.tags) {\n                this.tags = changes.tags.currentValue;\n            }\n\n        }\n\n    }\n\n    interface ITagListBindings {\n        [key: string]: any;\n\n        tags: any,\n        type: any,\n        typeLocal: any,\n        rebuid: any\n    }\n\n    const TagListBindings: ITagListBindings = {\n        tags: '<pipTags',\n        type: '<pipType',\n        typeLocal: '<pipTypeLocal',\n        rebuid: '<pipRebind'\n    }\n\n    class TagListChanges implements ng.IOnChangesObject, ITagListBindings {\n        [key: string]: ng.IChangesObject<any>;\n\n        tags: ng.IChangesObject<string[]>;\n        type: ng.IChangesObject<string>;\n        typeLocal: ng.IChangesObject<string>;\n        rebuid: ng.IChangesObject<boolean>\n    }\n\n    const TagList = {\n        bindings: TagListBindings,\n        templateUrl: 'tag_list/TagList.html',\n        controller: TagListController\n    }\n\n    angular\n        .module('pipTagList', ['pipTranslate'])\n        .component('pipTagList', TagList)\n\n}","(function(module) {\ntry {\n  module = angular.module('pipTags.Templates');\n} catch (e) {\n  module = angular.module('pipTags.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('tag_list/TagList.html',\n    '<div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{\\'bg-\\' + $ctrl.type + \\'-chips\\'}}\" ng-if=\"$ctrl.type && !$ctrl.typeLocal\"><span>{{$ctrl.type.toUpperCase() | translate | uppercase}}</span></div><div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{\\'bg-\\' + $ctrl.type + \\'-chips\\'}}\" ng-if=\"$ctrl.type && $ctrl.typeLocal\"><span>{{$ctrl.typeLocal.toUpperCase() | translate | uppercase}}</span></div><div class=\"pip-chip rm4\" ng-repeat=\"tag in $ctrl.tags\"><span>{{::tag}}</span></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-suite-tags-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZGF0YS9UYWdEYXRhU2VydmljZS50cyIsInNyYy9kYXRhL2luZGV4LnRzIiwic3JjL2luZGV4LnRzIiwic3JjL3Jlc3QvVGFnUmVzb3VyY2VzLnRzIiwic3JjL3RhZ19saXN0L1RhZ0xpc3QudHMiLCJ0ZW1wL3BpcC1zdWl0ZS10YWdzLWh0bWwubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUNJQTtJQUdJLGlCQUNZLE9BQThCLEVBQzlCLFVBQXdDO1FBRWhELFVBQVUsQ0FBQztRQUhILFlBQU8sR0FBUCxPQUFPLENBQXVCO1FBQzlCLGVBQVUsR0FBVixVQUFVLENBQThCO1FBSjVDLGFBQVEsR0FBVyxNQUFNLENBQUM7SUFPbEMsQ0FBQztJQUVNLDJCQUFTLEdBQWhCO1FBQ0ksSUFBSSxNQUFjLENBQUM7UUFDbkIsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFFekUsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRU0sMEJBQVEsR0FBZixVQUFnQixNQUFXLEVBQUUsZUFBMkMsRUFBRSxhQUFvQztRQUMxRyxNQUFNLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQztRQUN0QixNQUFNLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDdkUsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLGVBQWUsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUMvRixDQUFDO0lBRU0sNEJBQVUsR0FBakIsVUFBa0IsTUFBVyxFQUFFLElB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QUFNLENBQUM7UUFDM0MsQ0FBQztRQUVNLHNDQUFVLEdBQWpCLFVBQWtCLE9BQXVCO1lBQ3JDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7WUFDMUMsQ0FBQztRQUVMLENBQUM7UUFFTCx3QkFBQztJQUFELENBL0JBLEFBK0JDLElBQUE7SUFXRCxJQUFNLGVBQWUsR0FBcUI7UUFDdEMsSUFBSSxFQUFFLFVBQVU7UUFDaEIsSUFBSSxFQUFFLFVBQVU7UUFDaEIsU0FBUyxFQUFFLGVBQWU7UUFDMUIsTUFBTSxFQUFFLFlBQVk7S0FDdkIsQ0FBQTtJQUVEO1FBQUE7UUFPQSxDQUFDO1FBQUQscUJBQUM7SUFBRCxDQVBBLEFBT0MsSUFBQTtJQUVELElBQU0sT0FBTyxHQUFHO1FBQ1osUUFBUSxFQUFFLGVBQWU7UUFDekIsV0FBVyxFQUFFLHVCQUF1QjtRQUNwQyxVQUFVLEVBQUUsaUJBQWlCO0tBQ2hDLENBQUE7SUFFRCxPQUFPO1NBQ0YsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQ3RDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUE7QUFFekMsQ0FBQzs7QUMzRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCB7IElUYWdEYXRhU2VydmljZSwgSVRhZ0RhdGFQcm92aWRlciB9IGZyb20gJy4vSVRhZ0RhdGFTZXJ2aWNlJztcbmltcG9ydCB7IFBhcnR5VGFncyB9IGZyb20gJy4vUGFydHlUYWdzJztcbmltcG9ydCB7IFRhZyB9IGZyb20gJy4vVGFnJztcblxuY2xhc3MgVGFnRGF0YSBpbXBsZW1lbnRzIElUYWdEYXRhU2VydmljZSB7XG4gICAgcHJpdmF0ZSBSRVNPVVJDRTogc3RyaW5nID0gJ3RhZ3MnO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGlwUmVzdDogcGlwLnJlc3QuSVJlc3RTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBpcFNlc3Npb246IHBpcC5zZXJ2aWNlcy5JU2Vzc2lvblNlcnZpY2VcbiAgICApIHtcbiAgICAgICAgXCJuZ0luamVjdFwiO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRVc2VySWQoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHVzZXJJZDogc3RyaW5nO1xuICAgICAgICB1c2VySWQgPSB0aGlzLnBpcFNlc3Npb24uc2Vzc2lvbiA/IHRoaXMucGlwU2Vzc2lvbi5zZXNzaW9uLnVzZXJJZCA6IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHVzZXJJZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVhZFRhZ3MocGFyYW1zOiBhbnksIHN1Y2Nlc3NDYWxsYmFjaz86IChkYXRhOiBQYXJ0eVRhZ3MpID0+IHZvaWQsIGVycm9yQ2FsbGJhY2s/OiAoZXJyb3I6IGFueSkgPT4gdm9pZCk6IGFuZ3VsYXIuSVByb21pc2U8YW55PiB7XG4gICAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcbiAgICAgICAgcGFyYW1zLnBhcnR5X2lkID0gcGFyYW1zLnBhcnR5X2lkID8gcGFyYW1zLnBhcnR5X2lkIDogdGhpcy5nZXRVc2VySWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwUmVzdC5nZXRSZXNvdXJjZSh0aGlzLlJFU09VUkNFKS5nZXQocGFyYW1zLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVUYWdzKHBhcmFtczogYW55LCBkYXRhOiBhbnksIHN1Y2Nlc3NDYWxsYmFjaz86IChpdGVtOiBhbnkpID0+IHZvaWQsIGVycm9yQ2FsbGJhY2s/OiAoZXJyb3I6IGFueSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBwYXJhbXMucGFydHlfaWQgPSBwYXJhbXMucGFydHlfaWQgPyBwYXJhbXMucGFydHlfaWQgOiB0aGlzLmdldFVzZXJJZCgpO1xuICAgICAgICB0aGlzLnBpcFJlc3QuZ2V0UmVzb3VyY2UodGhpcy5SRVNPVVJDRSkuc2F2ZShwYXJhbXMsIGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVRhZ3MocGFyYW1zOiBhbnksIGRhdGE6IGFueSwgc3VjY2Vzc0NhbGxiYWNrPzogKGl0ZW06IGFueSkgPT4gdm9pZCwgZXJyb3JDYWxsYmFjaz86IChlcnJvcjogYW55KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIHBhcmFtcy5wYXJ0eV9pZCA9IHBhcmFtcy5wYXJ0eV9pZCA/IHBhcmFtcy5wYXJ0eV9pZCA6IHRoaXMuZ2V0VXNlcklkKCk7XG4gICAgICAgIHRoaXMucGlwUmVzdC5nZXRSZXNvdXJjZSh0aGlzLlJFU09VUkNFKS51cGRhdGUocGFyYW1zLCBkYXRhLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgIH1cblxufVxuXG5jbGFzcyBUYWdEYXRhUHJvdmlkZXIgaW1wbGVtZW50cyBJVGFnRGF0YVByb3ZpZGVyIHtcbiAgICBwcml2YXRlIF9zZXJ2aWNlOiBJVGFnRGF0YVNlcnZpY2U7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gICAgcHVibGljICRnZXQoXG4gICAgICAgIHBpcFJlc3Q6IHBpcC5yZXN0LklSZXN0U2VydmljZSxcbiAgICAgICAgcGlwU2Vzc2lvbjogcGlwLnNlcnZpY2VzLklTZXNzaW9uU2VydmljZVxuICAgICkge1xuICAgICAgICBcIm5nSW5qZWN0XCI7XG5cbiAgICAgICAgaWYgKHRoaXMuX3NlcnZpY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fc2VydmljZSA9IG5ldyBUYWdEYXRhKHBpcFJlc3QsIHBpcFNlc3Npb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlcnZpY2U7XG4gICAgfVxuXG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdwaXBUYWdEYXRhJywgWydwaXBDb21tb25SZXN0J10pXG4gICAgLnByb3ZpZGVyKCdwaXBUYWdEYXRhJywgVGFnRGF0YVByb3ZpZGVyKTtcblxuIiwiaW1wb3J0ICcuL1RhZ0RhdGFTZXJ2aWNlJztcbmltcG9ydCAnLi9JVGFnRGF0YVNlcnZpY2UnO1xuXG5cbmV4cG9ydCAqIGZyb20gJy4vSVRhZ0RhdGFTZXJ2aWNlJztcblxuIiwiaW1wb3J0ICcuL3RhZ19saXN0L1RhZ0xpc3QnXG5pbXBvcnQgJy4vcmVzdC9UYWdSZXNvdXJjZXMnO1xuaW1wb3J0ICcuL2RhdGEnO1xuXG5cbmFuZ3VsYXIubW9kdWxlKCdwaXBUYWdzJywgW1xuICAgICAgICAncGlwVGFnLlJlc3QnLFxuICAgICAgICAncGlwVGFnRGF0YScsXG4gICAgICAgICdwaXBUYWdMaXN0J1xuXSk7XG5cblxuZXhwb3J0ICogZnJvbSAnLi9kYXRhJztcblxuXG4iLCJmdW5jdGlvbiBjb25maWdUYWdSZXNvdXJjZXMocGlwUmVzdFByb3ZpZGVyOiBwaXAucmVzdC5JUmVzdFByb3ZpZGVyKSB7XG4gICAgcGlwUmVzdFByb3ZpZGVyLnJlZ2lzdGVyUmVzb3VyY2UoJ3RhZ3MnLCAnL2FwaS8xLjAvdGFncy86cGFydHlfaWQnLFxuICAgICAgICB7IHBhcnR5X2lkOiAnQHBhcnR5X2lkJyB9LFxuICAgICAgICB7XG4gICAgICAgICAgICB1cGRhdGU6IHsgbWV0aG9kOiAnUFVUJyB9XG4gICAgICAgIH1cbiAgICApO1xufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgncGlwVGFnLlJlc3QnLCBbXSlcbiAgICAuY29uZmlnKGNvbmZpZ1RhZ1Jlc291cmNlcyk7XG5cbiIsIntcbiAgICBpbnRlcmZhY2UgSVRhZ0xpc3Qge1xuICAgICAgICB0YWdzOiBzdHJpbmdbXTtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICB0eXBlTG9jYWw6IHN0cmluZztcbiAgICB9XG5cbiAgICBjbGFzcyBUYWdMaXN0Q29udHJvbGxlciBpbXBsZW1lbnRzIElUYWdMaXN0IHtcbiAgICAgICAgcHVibGljIHJlYmluZDogc3RyaW5nO1xuXG4gICAgICAgIHB1YmxpYyB0YWdzOiBzdHJpbmdbXTtcbiAgICAgICAgcHVibGljIHR5cGU6IHN0cmluZztcbiAgICAgICAgcHVibGljIHR5cGVMb2NhbDogc3RyaW5nO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICAgICAgJHNjb3BlOiBuZy5JU2NvcGUsXG4gICAgICAgICAgICAkZWxlbWVudDogbmcuSVJvb3RFbGVtZW50U2VydmljZVxuICAgICAgICApIHtcblxuICAgICAgICAgICAgLy8gU2V0IHRhZ3NcbiAgICAgICAgICAgICRlbGVtZW50LmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MoJ3BpcC10YWctbGlzdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSB0b0Jvb2xlYW4odmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICAgICAgaWYgKF8uaXNOdWxsKHZhbHVlKSB8fCBfLmlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgPT0gJzEnIHx8IHZhbHVlID09ICd0cnVlJztcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyAkb25DaGFuZ2VzKGNoYW5nZXM6IFRhZ0xpc3RDaGFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWJpbmQgJiYgY2hhbmdlcy50YWdzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YWdzID0gY2hhbmdlcy50YWdzLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBpbnRlcmZhY2UgSVRhZ0xpc3RCaW5kaW5ncyB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcblxuICAgICAgICB0YWdzOiBhbnksXG4gICAgICAgIHR5cGU6IGFueSxcbiAgICAgICAgdHlwZUxvY2FsOiBhbnksXG4gICAgICAgIHJlYnVpZDogYW55XG4gICAgfVxuXG4gICAgY29uc3QgVGFnTGlzdEJpbmRpbmdzOiBJVGFnTGlzdEJpbmRpbmdzID0ge1xuICAgICAgICB0YWdzOiAnPHBpcFRhZ3MnLFxuICAgICAgICB0eXBlOiAnPHBpcFR5cGUnLFxuICAgICAgICB0eXBlTG9jYWw6ICc8cGlwVHlwZUxvY2FsJyxcbiAgICAgICAgcmVidWlkOiAnPHBpcFJlYmluZCdcbiAgICB9XG5cbiAgICBjbGFzcyBUYWdMaXN0Q2hhbmdlcyBpbXBsZW1lbnRzIG5nLklPbkNoYW5nZXNPYmplY3QsIElUYWdMaXN0QmluZGluZ3Mge1xuICAgICAgICBba2V5OiBzdHJpbmddOiBuZy5JQ2hhbmdlc09iamVjdDxhbnk+O1xuXG4gICAgICAgIHRhZ3M6IG5nLklDaGFuZ2VzT2JqZWN0PHN0cmluZ1tdPjtcbiAgICAgICAgdHlwZTogbmcuSUNoYW5nZXNPYmplY3Q8c3RyaW5nPjtcbiAgICAgICAgdHlwZUxvY2FsOiBuZy5JQ2hhbmdlc09iamVjdDxzdHJpbmc+O1xuICAgICAgICByZWJ1aWQ6IG5nLklDaGFuZ2VzT2JqZWN0PGJvb2xlYW4+XG4gICAgfVxuXG4gICAgY29uc3QgVGFnTGlzdCA9IHtcbiAgICAgICAgYmluZGluZ3M6IFRhZ0xpc3RCaW5kaW5ncyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0YWdfbGlzdC9UYWdMaXN0Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiBUYWdMaXN0Q29udHJvbGxlclxuICAgIH1cblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGlwVGFnTGlzdCcsIFsncGlwVHJhbnNsYXRlJ10pXG4gICAgICAgIC5jb21wb25lbnQoJ3BpcFRhZ0xpc3QnLCBUYWdMaXN0KVxuXG59IiwiKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcFRhZ3MuVGVtcGxhdGVzJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBUYWdzLlRlbXBsYXRlcycsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgndGFnX2xpc3QvVGFnTGlzdC5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cInBpcC1jaGlwIHJtNCBwaXAtdHlwZS1jaGlwIHBpcC10eXBlLWNoaXAtbGVmdCB7e1xcJ2JnLVxcJyArICRjdHJsLnR5cGUgKyBcXCctY2hpcHNcXCd9fVwiIG5nLWlmPVwiJGN0cmwudHlwZSAmJiAhJGN0cmwudHlwZUxvY2FsXCI+PHNwYW4+e3skY3RybC50eXBlLnRvVXBwZXJDYXNlKCkgfCB0cmFuc2xhdGUgfCB1cHBlcmNhc2V9fTwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwicGlwLWNoaXAgcm00IHBpcC10eXBlLWNoaXAgcGlwLXR5cGUtY2hpcC1sZWZ0IHt7XFwnYmctXFwnICsgJGN0cmwudHlwZSArIFxcJy1jaGlwc1xcJ319XCIgbmctaWY9XCIkY3RybC50eXBlICYmICRjdHJsLnR5cGVMb2NhbFwiPjxzcGFuPnt7JGN0cmwudHlwZUxvY2FsLnRvVXBwZXJDYXNlKCkgfCB0cmFuc2xhdGUgfCB1cHBlcmNhc2V9fTwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwicGlwLWNoaXAgcm00XCIgbmctcmVwZWF0PVwidGFnIGluICRjdHJsLnRhZ3NcIj48c3Bhbj57ezo6dGFnfX08L3NwYW4+PC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1waXAtc3VpdGUtdGFncy1odG1sLm1pbi5qcy5tYXBcbiJdfQ=="}